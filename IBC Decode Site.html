<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IBC Root Beer Code Decoder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #e8eef3, #f7f9fb);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      color: #333;
    }

    .card {
      width: 100%;
      max-width: 420px;
      background: #ffffff;
      border-radius: 14px;
      padding: 28px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
    }

    h1 {
      margin-top: 0;
      text-align: center;
      font-size: 22px;
      margin-bottom: 6px;
    }

    .subtitle {
      text-align: center;
      font-size: 14px;
      color: #666;
      margin-bottom: 24px;
    }

    label {
      font-size: 14px;
      font-weight: 600;
      display: block;
      margin-bottom: 6px;
    }

    input {
      width: 100%;
      padding: 12px 14px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #dcdcdc;
      outline: none;
      transition: border-color 0.2s;
    }

    input:focus {
      border-color: #4a90e2;
    }

    button {
      width: 100%;
      margin-top: 16px;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background: #4a90e2;
      color: #ffffff;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background: #3b7fc4;
    }

    button:active {
      transform: scale(0.98);
    }

    .result {
      margin-top: 22px;
      padding: 16px;
      background: #f3f6fa;
      border-radius: 10px;
      font-size: 14px;
      line-height: 1.6;
    }

    .result strong {
      color: #000;
    }

    .error {
      color: #b00020;
      font-weight: 600;
    }

    .info-wrapper {
      text-align: right;
      margin-bottom: 8px;
    }

    .info-btn {
      cursor: pointer;
      font-size: 18px;
    }

    .info-box {
      display: none;
      background: #f3f6fa;
      border-radius: 10px;
      padding: 14px;
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 16px;
    }

  </style>
</head>
<body>

  <div class="card">
    <h1>IBC Code Decoder</h1>
    <div class="subtitle">Decode production & expiry dates</div>

    <div class="info-wrapper">
      <span class="info-btn" onclick="toggleInfo()">ℹ️</span>
    </div>

    <div class="info-box" id="infoBox">
      <strong>How IBC Codes Work</strong><br><br>
      • First letter = production month (I is skipped)<br>
      • Second character = year digit (0 = 2020)<br>
      • Next 3 numbers = Julian day of the year<br>
      • Remaining characters = facility & line<br><br>
      <strong>Shelf Life:</strong> 360 days from production date
    </div>
    


    <label for="code">IBC Product Code</label>


    <input type="text" id="code" placeholder="e.g. F4177DP2">

    <button onclick="decodeIBC()">Decode Code</button>

    <div class="result" id="result"></div>
  </div>

  <script>
    function decodeIBC() {
      const code = document.getElementById("code").value.toUpperCase().trim();
      const resultDiv = document.getElementById("result");

      if (code.length < 7) {
        resultDiv.innerHTML = '<span class="error">Invalid code format.</span>';
        return;
      }

      // Month letter (I skipped)
      const letters = "ABCDEFGHJKLM";
      const monthLetter = code.charAt(0);
      const monthIndex = letters.indexOf(monthLetter);

      if (monthIndex === -1) {
        resultDiv.innerHTML = '<span class="error">Invalid month letter.</span>';
        return;
      }

      const monthFromLetter = monthIndex + 1;

      // Year
      const yearDigit = parseInt(code.charAt(1));
      if (isNaN(yearDigit)) {
        resultDiv.innerHTML = '<span class="error">Invalid year digit.</span>';
        return;
      }

      const year = 2020 + yearDigit;

      // Julian day
      const julianDay = parseInt(code.substr(2, 3));
      if (isNaN(julianDay) || julianDay < 1 || julianDay > 366) {
        resultDiv.innerHTML = '<span class="error">Invalid Julian date.</span>';
        return;
      }

      // Production date
      const productionDate = new Date(year, 0);
      productionDate.setDate(julianDay);

      // Expiry date (360 days)
      const expiryDate = new Date(productionDate);
      expiryDate.setDate(expiryDate.getDate() + 360);

      resultDiv.innerHTML = `
        <strong>Decoded Results</strong><br><br>
        <strong>Month Letter:</strong> ${monthLetter} (Month ${monthFromLetter})<br>
        <strong>Year:</strong> ${year}<br>
        <strong>Julian Day:</strong> ${julianDay}<br><br>
        <strong>Production Date:</strong> ${productionDate.toDateString()}<br>
        <strong>Expiry Date:</strong> ${expiryDate.toDateString()}
      `;
    }

    function toggleInfo() {
      const box = document.getElementById("infoBox");
      box.style.display = box.style.display === "block" ? "none" : "block";
    }

  </script>

</body>
</html>
